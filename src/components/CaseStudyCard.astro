---
import Icon from './Icon.astro';

export interface Props {
  title: string;
  tagline: string;
  challenge: string;
  results: string[];
  status: string;
  metrics?: {
    label: string;
    value: string;
  }[];
  index: number;
}

const { title, tagline, challenge, results, status, metrics = [], index } = Astro.props;

const colors = [
  'from-[#818CF8]/20 to-[#818CF8]/5 border-[#818CF8]/30',
  'from-[#A78BFA]/20 to-[#A78BFA]/5 border-[#A78BFA]/30',
  'from-[#67E8F9]/20 to-[#67E8F9]/5 border-[#67E8F9]/30',
  'from-[#34D399]/20 to-[#34D399]/5 border-[#34D399]/30'
];

const colorClass = colors[index % colors.length];
---

<article class={`
  card-dark bg-gradient-to-br ${colorClass} 
  p-8 hover-lift-dark border-glow
  transition-all duration-300
`}>
  <div class="mb-6">
    <h3 class="text-2xl font-bold text-white mb-2">{title}</h3>
    <p class="text-slate-400 italic">{tagline}</p>
  </div>

  <div class="space-y-6">
    <div>
      <h4 class="text-sm font-semibold text-slate-500 uppercase tracking-wider mb-2">Le Défi</h4>
      <p class="text-slate-300">{challenge}</p>
    </div>

    {metrics.length > 0 && (
      <div class="grid grid-cols-2 gap-4">
        {metrics.map((metric) => (
          <div class="text-center bg-slate-900/50 rounded-lg p-3">
            <p class="text-2xl font-bold gradient-text-dark">{metric.value}</p>
            <p class="text-xs text-slate-500">{metric.label}</p>
          </div>
        ))}
      </div>
    )}

    <div>
      <h4 class="text-sm font-semibold text-slate-500 uppercase tracking-wider mb-2">Résultats</h4>
      <ul class="space-y-1">
        {results.map((result) => (
          <li class="text-sm text-slate-300 flex items-start">
            <Icon name="check" class="text-[#34D399] mr-2 flex-shrink-0 mt-0.5" size="sm" />
            {result}
          </li>
        ))}
      </ul>
    </div>

    <div class="pt-4 border-t border-slate-800">
      <p class="text-sm">
        <span class="text-slate-500">Statut :</span>
        <span class="text-white font-semibold ml-2">{status}</span>
      </p>
    </div>
  </div>
</article>